name: Update Weather Image

on:
  schedule:
    # Run every 15 minutes
    - cron: '*/15 * * * *'
  workflow_dispatch: # Allow manual trigger

jobs:
  update-image:
    runs-on: ubuntu-latest
    steps:
      - name: Generate fresh weather image
        env:
          VERCEL_URL: ${{ secrets.VERCEL_URL || 'weaaqi-web.vercel.app' }}
        run: |
          echo "Calling /api/image endpoint to generate fresh image..."
          curl -f -s "https://${VERCEL_URL}/api/image" > /dev/null && echo "✓ Image generated successfully" || echo "✗ Failed to generate image"